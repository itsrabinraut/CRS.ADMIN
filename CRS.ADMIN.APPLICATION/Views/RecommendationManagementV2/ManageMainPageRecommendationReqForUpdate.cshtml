@model CRS.ADMIN.APPLICATION.Models.RecommendationManagementV2.RecommendationDetailCommonModel
@{
    ViewBag.Title = "ManageMainPageRecommendationReqForUpdate";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .select2-search--dropdown {
        display: none !important;
    }
</style>
<div class="px-8 py-4 flex flex-col gap-8">
    <div class="flex justify-between items-center">
        <div>
            <div class="heading-title">@CRS.ADMIN.APPLICATION.Resources.Resource.Recommendation_Requests</div>
            <div class="span-title-light-gray">@CRS.ADMIN.APPLICATION.Resources.Resource.RecommendationConfigSupportMsg</div>
        </div>
    </div>
    <div class="flex flex-col gap-8">
        @Html.AntiForgeryToken()
        <div class=" grid gap-[24px] grid-cols-3" style="padding-bottom:20px">
            <div class="input-field-common">
                <label for="" class="block mb-[12px] text-sm font-medium text-secondary-100 ">
                    @CRS.ADMIN.APPLICATION.Resources.Resource.Club_Location
                </label>
                <select id="default_select" style="width: 100%;" class="text-[#B7B7B7] h-[44px] LocationId" name="locationid" disabled>
                    @foreach (KeyValuePair<string, string> item in ViewBag.ClubLocation as Dictionary<string, string>)
                    {
                        if (item.Key == ViewBag.LocationId)
                        {
                            var selectedId = ViewBag.ClubLocation as string;
                            if (item.Key == selectedId)
                            {
                                <option value="@item.Key" selected>
                                    @item.Value
                                </option>
                            }
                            else
                            {
                                <option value="@item.Key">
                                    @item.Value
                                </option>
                            }
                        }
                    }
                </select>
            </div>
            <div class="input-field-common">
                <label for="" class="block mb-[12px] text-sm font-medium text-secondary-100 ">
                    @CRS.ADMIN.APPLICATION.Resources.Resource.Group
                </label>
                <select id="default_select1" style="width: 100%;" class="text-[#B7B7B7] h-[44px]" name="groupid">
                    @foreach (KeyValuePair<string, string> item in ViewBag.GroupDDLByLocationId as Dictionary<string, string>)
                    {
                        var selectedId = ViewBag.GroupDDLByLocationId as string;
                        if (item.Key == selectedId)
                        {
                            <option value="@item.Key" selected>
                                @item.Value
                            </option>
                        }
                        else
                        {
                            <option value="@item.Key">
                                @item.Value
                            </option>
                        }
                    }
                </select>
            </div>
            <div class="input-field-common">
                <label for="" class="block mb-[12px] text-sm font-medium text-secondary-100 ">
                    @CRS.ADMIN.APPLICATION.Resources.Resource.Club
                </label>
                <select id="default_select3" style="width: 100%;" class="text-[#B7B7B7] h-[44px] clubDDL" name="clubid" disabled>
                    @foreach (KeyValuePair<string, string> item in ViewBag.ClubDDL as Dictionary<string, string>)
                    {
                        if (item.Key == ViewBag.ClubId)
                        {
                            var selectedId = ViewBag.ClubDDL as string;
                            if (item.Key == selectedId)
                            {
                                <option value="@item.Key" selected>
                                    @item.Value
                                </option>
                            }
                            else
                            {
                                <option value="@item.Key">
                                    @item.Value
                                </option>
                            }
                        }
                    }
                </select>
            </div>
            <div class="input-field-common">
                <label for="" class="block mb-[12px] text-sm font-medium text-secondary-100 ">
                    @CRS.ADMIN.APPLICATION.Resources.Resource.Display_Order
                </label>
                <select id="default_select4" style="width: 100%;" class="text-[#B7B7B7] h-[44px]" name="displayidhold" disabled>
                    @foreach (KeyValuePair<string, string> item in ViewBag.DisplayOrderDDL as Dictionary<string, string>)
                    {
                        if (item.Key == ViewBag.DisplayId)
                        {
                            var selectedId = ViewBag.DisplayOrderDDL as string;
                            if (item.Key == selectedId)
                            {
                                <option value="@item.Key" selected>
                                    @item.Value
                                </option>
                            }
                            else
                            {
                                <option value="@item.Key">
                                    @item.Value
                                </option>
                            }
                        }
                    }
                </select>
            </div>
        </div>
        <!-- table  -->
        <div class=" grid gap-[24px]">
            <div class="relative overflow-x-auto">
                <table class="w-full  text-left club-table bordered" id="componentContainer">
                    <thead class="club-table-thead bg-[#F3F3F3]">
                        <tr>
                            <th scope="col" class="p-[12px]">
                                <div class="flex">
                                    S.N
                                </div>
                            </th>
                            <th scope="col" class="p-[12px]">
                                <div class="flex">
                                    @CRS.ADMIN.APPLICATION.Resources.Resource.Hosts
                                </div>
                            </th>
                            <th scope="col" class="p-[12px]">
                                <div class="flex justify-center">
                                    @CRS.ADMIN.APPLICATION.Resources.Resource.Action
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            int sno = 1;
                            foreach (var item in Model.GetMainPageHostListForUpdate)
                            {
                                <tr class="bg-white border-b" id="templateRow">
                                    <td class="p-[12px]">
                                        @sno
                                    </td>
                                    <td class="p-[12px]">
                                        <div class="input-field-common add-new-select-rm">
                                            <div class="">@item.HostName</div>
                                        </div>
                                    </td>
                                    <td class="p-[12px]">
                                        <div class="flex gap-[7px] justify-center ">
                                            <div>
                                                <i class="fa-regular fa-pen-to-square text-[#989898] cursor-pointer"></i>
                                            </div>
                                            <div>
                                                <i class="fa-solid fa-trash-can text-primary-100 cursor-pointer"></i>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                sno++;
                            }
                        }

                    </tbody>
                </table>
            </div>
            <div class="flex justify-end">
                <div class="flex gap-[24px]">
                    <div class="btn btn-secondary w-[96px] cursor-pointer" data-modal-target="popup-modal-reject-mainpage"
                         data-modal-toggle="popup-modal-reject-mainpage" alt="" onclick="rejectMainPage()">@CRS.ADMIN.APPLICATION.Resources.Resource.Reject</div>
                    <div class="btn btn-primary w-[96px]" data-modal-target="popup-modal-accept-mainpage" data-modal-toggle="popup-modal-accept-mainpage" alt="" onclick="rejectMainPage()">
                        @CRS.ADMIN.APPLICATION.Resources.Resource.Approve
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--accept pop up modal for main page recommendation request-->
<div id="popup-modal-accept-mainpage" tabindex="-1"
     class="fixed top-0 left-0 right-0 z-50 hidden p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full">
    <div class="relative w-full max-w-md max-h-full">
        <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
            <div class="p-6 text-start">
                <div class=" pb-[11px] border-b border-[rgba(44, 44, 44, 0.08)] text-base font-semibold text-secondary-100">
                    @CRS.ADMIN.APPLICATION.Resources.Resource.Confirmation
                    <button type="button"
                            class="absolute top-4 right-3 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
                            data-modal-hide="popup-modal-accept">
                        <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                             viewBox="0 0 14 14">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                        </svg>
                    </button>
                </div>
                <div>
                    <div class="pt-[20px] text-base  text-secondary-100">
                        @CRS.ADMIN.APPLICATION.Resources.Resource.RecommendationAcceptWarnMsg
                    </div>
                    <div class="flex gap-2 justify-end mt-[45px]">
                        <div class="btn btn-secondary w-[110px]" data-modal-hide="popup-modal-accept-mainpage">@CRS.ADMIN.APPLICATION.Resources.Resource.Cancel</div>
                        <div class="btn btn-primary w-[110px]" onclick="acceptMainPageReq()">@CRS.ADMIN.APPLICATION.Resources.Resource.Confirm</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--reject pop up modal for main page recommendation request-->
<div id="popup-modal-reject-mainpage" tabindex="-1"
     class="fixed top-0 left-0 right-0 z-50 hidden p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full">
    <div class="relative w-full max-w-md max-h-full">
        <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
            <div class="p-6 text-start">
                <div class=" pb-[11px] border-b border-[rgba(44, 44, 44, 0.08)] text-base font-semibold text-secondary-100">
                    @CRS.ADMIN.APPLICATION.Resources.Resource.Confirmation
                    <button type="button"
                            class="absolute top-4 right-3 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
                            data-modal-hide="popup-modal-reject">
                        <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                             viewBox="0 0 14 14">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                        </svg>
                    </button>
                </div>
                <div>
                    <div class="pt-[20px] text-base  text-secondary-100">
                        @CRS.ADMIN.APPLICATION.Resources.Resource.RecommendationAcceptWarnMsg
                    </div>
                    <div class="flex gap-2 justify-end mt-[45px]">
                        <div class="btn btn-secondary w-[110px]" data-modal-hide="popup-modal-reject-mainpage">No</div>
                        <div class="btn btn-primary w-[110px]" onclick="rejectMainPageReq()" id="btn_submit">Yes</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section scripts{
    <script>
        function acceptMainPageReq() {
            var groupid = document.getElementsByName("groupid")[0];
            var GroupId = groupid.value;
            $.ajax({
                type: 'POST',
                async: true,
                url: "/RecommendationManagementV2/ApproveMainPageRecommendationReq?groupid=" + GroupId,
                dataType: 'json',
                data: {
                    __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val(),
                },
                success: function (responseData) {
                    //window.location.href ="RecommendationmanagementV2/Index"
                    window.location.reload();
                },
                error: function (ex) {

                }
            });
        }

        function rejectMainPageReq() {
            $.ajax({
                type: 'POST',
                async: true,
                url: "/RecommendationManagementV2/RejectMainPageRecommendationRequest",
                dataType: 'json',
                data: {
                    __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val(),
                },
                success: function (responseData) {
                    //window.location.href = "RecommendationmanagementV2/Index"
                    window.location.reload();
                },
                error: function (ex) {

                }
            });
        }
    </script>
}


